{{page-title this.model.title}}

<div
  class="au-u-flex detail-container"
  style="display: flex; overflow: scroll;"
>
  <section
    style="height: fit-content; width: 70%;"
    id="detail-left-section"
    class="au-u-flex au-u-flex--column"
  >

    <AuToolbar @size="medium" class="au-u-margin-small" as |Group|>

      <Group>
        <ul class="au-c-list-horizontal au-c-list-horizontal--small">
          <li class="au-c-list-horizontal__item">
            <AuLink @route="home" @icon="arrow-left">
              Agendapunten
            </AuLink>
          </li>
          <li
            class="au-c-list-horizontal__item"
            style="display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden;"
          >
            {{this.model.title}}
          </li>
        </ul>
      </Group>
    </AuToolbar>

    <AuCard
      @shadow={{true}}
      @size="small"
      style="border-top:solid 5px #FFE615; height: fit-content; min-height: 90%; display: flex;"
      class="au-o-region-small au-u-margin-large au-u-margin-top-small au-u-padding"
      as |c|
    >
      <c.header>

        <AuLink
          @route="detail"
          class="au-u-h3 au-u-medium"
          style=" text-decoration: none; "
        >
          {{#if this.model.title}}
            {{this.model.title}}
          {{/if}}

        </AuLink>

      </c.header>
      <c.content>

        {{#if this.model.session.approvedDate}}
          <section
            class="au-u-flex au-u-muted au-u-margin-top-tiny"
            style=" align-items: center;"
          >
            <AuIcon
              class="au-u-margin-right-small"
              @size="large"
              @icon="check"
            />
            <p>
              Goedgekeurd -
              {{iso-formatter this.model.session.approvedDate}}

            </p>
          </section>
        {{/if}}

        {{#if this.model.municipality}}
          <section
            class="au-u-flex au-u-muted au-u-margin-top-tiny"
            style=" align-items: center;"
          >
            <AuIcon
              class="au-u-margin-right-small"
              @size="large"
              @icon="check"
            />
            <p>{{this.model.title_agenda.value}}
              -
              {{#if this.model.geplandeStart.value}}
                {{iso-formatter this.model.geplandeStart.value}}
              {{else}}
                Geen Datum
              {{/if}}</p>
          </section>
          <section
            class="au-u-flex au-u-muted au-u-margin-top-tiny"
            style=" align-items: center;"
          >
            <AuIcon
              class="au-u-margin-right-small"
              @size="large"
              @icon="message"
            />
            <LinkTo
              @route="municipality"
              @model={{this.model.eenheid_werkingsgebied_label.value}}
            >
              <p>Gemeente
                {{#if this.model.eenheid_werkingsgebied_label.value}}
                  {{this.model.eenheid_werkingsgebied_label.value}}
                {{else}}
                  Geen Gemeente
                {{/if}}</p>
            </LinkTo>
          </section>
        {{/if}}
        {{#if this.model.alternateLink}}
          <section
            class="au-u-flex au-u-muted au-u-margin-top-tiny"
            style=" align-items: center;"
          >
            <AuIcon
              class="au-u-margin-right-small"
              @size="large"
              @icon="calendar"
            />
            <p>
              <a href="{{this.model.alternateLink}}">Bekijk agendapunt op de
                website van de gemeente</a>
            </p>
          </section>
        {{/if}}

        <section>
          <p>
            {{#if this.model.description}}
              {{this.model.description}}
            {{else}}
              We hebben geen beschrijving ontvangen voor dit agendapunt.
            {{/if}}
          </p>
        </section>
        <section>
          {{#each this.model.handledBy.hasVotes as |vote|}}
            <VoteOverview
              @numberOfAbstentions={{vote.numberOfAbstentions}}
              @numberOfOpponents={{vote.numberOfOpponents}}
              @numberOfProponents={{vote.numberOfProponents}}
            />
            <div class="au-o-grid au-u-margin">
              <div class="au-u-1-3">
                <h2>Voorstander</h2>
                {{#each vote.hasProponents as |mandatary|}}
                  {{#if mandatary.alias}}
                    <p>{{mandatary.alias.familyName}}
                      {{mandatary.alias.firstNameUsed}}</p>
                  {{/if}}
                {{/each}}
              </div>
              <div class="au-u-1-3">
                <h2>Tegenstander</h2>
                {{#each vote.hasOpponents as |mandatary|}}
                  {{#if mandatary.alias}}

                    <p>{{mandatary.alias.familyName}}
                      {{mandatary.alias.firstNameUsed}}</p>
                  {{/if}}
                {{/each}}
              </div>
              <div class="au-u-1-3">
                <h2>Onthouder</h2>
                {{#each vote.hasAbstainers as |mandatary|}}
                  {{#if mandatary.alias}}
                    <p>{{mandatary.alias.familyName}}
                      {{mandatary.alias.firstNameUsed}}</p>
                  {{/if}}
                {{/each}}
              </div>
            </div>
          {{/each}}
        </section>
      </c.content>
    </AuCard>
  </section>
  <section
    id="detail-right-section"
    class="au-u-background-gray-100"
    style="height:100%;min-height: 100%;align-items: stretch; width: 30%;"
  >
    <AuCard
      @flex={{true}}
      @shadow={{true}}
      @size="small"
      style="border-left:solid 5px #FFE615; height: 35rem;"
      class="au-o-region-small au-u-margin-large au-u-margin-top-huge au-u-padding"
      as |c|
    >
      <c.header @badgeIcon={{"user-check"}} @badgeSkin="none">

        <h1 class="au-u-h4 au-u-medium">
          Meer info
        </h1>

      </c.header>
      <c.content>
        <AuContent>
          <div
            class="au-u-flex au-u-flex--column au-o-flow--small au-u-margin-left-large au-u-margin-top-small"
          >
            <section class="au-u-flex au-u-flex--column au-u-muted">
              <h5>Website</h5>
              <AuLinkExternal
                href={{"http://www.zorg-en-gezondheid.be"}}
                @icon="external-link"
                @iconAlignment="right"
              >
                http://www.zorg-en-gezondheid.be
              </AuLinkExternal>
            </section>
          </div>

        </AuContent>
      </c.content>
    </AuCard>
  </section>
</div>
